IPv4용 DHCP(동적 호스트 구성 프로토콜) 서비스는 IPv4 주소, 서브넷 마스크, 게이트웨이 및 기타 IPv4 네트워킹 매개변수의 할당을 자동화합니다. 
이를 동적 주소 지정이라고 합니다. 동적 주소 지정의 대안은 정적 주소 지정입니다. 
정적 주소를 사용할 경우, 네트워크 관리자는 호스트의 IP 주소 정보를 수동으로 입력합니다.

호스트가 네트워크에 연결되면 DHCP 서버에 접속하여 주소를 요청합니다. 
DHCP 서버는 풀이라고 하는 구성된 주소 범위에서 주소를 선택하여 호스트에 할당(임대)합니다.

대규모 네트워크나 사용자 수가 자주 바뀌는 네트워크에서는 DHCP를 사용하여 주소를 할당하는 것이 좋습니다. 
새로운 사용자가 유입되어 연결이 필요할 수 있으며, 다른 사용자는 새 컴퓨터를 연결해야 할 수도 있습니다. 
각 연결에 고정 주소를 사용하는 것보다 DHCP를 사용하여 IPv4 주소를 자동으로 할당하는 것이 더 효율적입니다.

DHCP는 임대 기간이라고 하는 설정 가능한 기간 동안 IP 주소를 할당할 수 있습니다. 임대 기간은 중요한 DHCP 설정입니다. 
임대 기간이 만료되거나 DHCP 서버가 DHCPRELEASE 메시지를 수신하면 주소는 재사용을 위해 DHCP 풀로 반환됩니다. 
사용자는 DHCP를 통해 자유롭게 위치를 이동하고 네트워크 연결을 쉽게 재설정할 수 있습니다.

그림에서 볼 수 있듯이 다양한 유형의 장치가 DHCP 서버가 될 수 있습니다. 
대부분의 중대형 네트워크에서 DHCP 서버는 일반적으로 로컬 전용 PC 기반 서버입니다. 
홈 네트워크의 경우, DHCP 서버는 일반적으로 홈 네트워크를 ISP에 연결하는 로컬 라우터에 위치합니다.



클라이언트                                    DHCP 서버
   |                                             |
   | --- DHCPDISCOVER ------------------------>  |
   |                                             |
   | <--- DHCPOFFER ---------------------------  |
   |                                             |
   | --- DHCPREQUEST ------------------------->  |
   |                                             |
   | <--- DHCPACK -----------------------------  |


클라이언트가 요청한 IP 주소는 임대 기간 동안 사용 가능.
임대 만료 전 DHCPREQUEST를 통해 임대를 갱신 가능.

#DORA 과정
단계  	 메시지	           송신 주체	   수신 주체	                                 주요 내용
1	DHCPDISCOVER	      클라이언트	네트워크 전체(DHCP 서버)    	사용 가능한 DHCP 서버를 찾기 위해 브로드캐스트.
2	DHCPOFFER	             서버	      클라이언트	                서버가 제안하는 IP 주소, 서브넷 마스크, 기본 게이트웨이, DNS, 임대 기간 정보 포함.
3	DHCPREQUEST	          클라이언트	특정 DHCP 서버	                클라이언트가 선택한 서버와 IP 임대 요청. 이전 주소 요청 가능.
4	DHCPACK	                 서버	      클라이언트	                IP 임대 완료 확인. 클라이언트가 IP 사용 가능 상태가 됨.

⚠️ 예외: 요청한 IP가 사용 불가 시 → 서버는 DHCPNAK으로 응답.
NAK 수신 시 클라이언트는 새로 DHCPDISCOVER를 전송하여 재시도.


#DHCPv6와의 차이
-SOLICIT → DISCOVER
-ADVERTISE → OFFER
-REQUEST / INFORMATION REQUEST → REQUEST
-REPLY → ACK
= 기본 동작 원리(DORA)와 메시지 순서 구조는 DHCPv4와 유사. IPv6 환경용 DHCPv6는 메시지 이름만 다름


#cisco 오답 풀이
1️⃣ “DHCP는 목적지의 MAC 주소를 검색하는 과정을 자동화합니다.”
-MAC 주소 검색은 ARP(주소 결정 프로토콜, Address Resolution Protocol) 의 역할입니다.
-DHCP는 IP 주소와 네트워크 정보를 클라이언트에게 할당하는 역할만 합니다.
= 즉, DHCP는 MAC 주소를 찾는 것이 아니라, MAC 주소를 기준으로 IP를 할당할 수 있습니다.

2️⃣ “DHCP는 도메인 이름에 대한 IP 주소를 검색하는 프로세스를 자동화합니다.”
-도메인 이름 → IP 주소 변환은 DNS(Domain Name System) 의 역할입니다.
-DHCP는 장치가 네트워크에 접속할 때 자신의 IP 주소와 서브넷, 게이트웨이 등을 받는 프로토콜입니다.
= DNS처럼 “도메인을 찾아주는” 기능은 DHCP가 하지 않습니다.

4️⃣ “DHCP는 개인 및 공용 IP 주소의 변환을 자동화합니다.”
-개인 ↔ 공용 IP 주소 변환은 NAT(Network Address Translation) 의 기능입니다.
-DHCP는 단순히 IP 주소와 네트워크 설정을 자동으로 할당하는 역할만 합니다.
= NAT처럼 IP를 변환하거나 라우팅을 조정하지 않습니다.

